id: PubOffline
name: 'Publish Offline'
description: "This plugin allows administrators to publish a version of their site to another directory on their file system for the express purpose of creating a version of their site offline. It also provides for designers a set of template tags to conditionally display content depending upon whether or not the user is publishing the off or online version of their site."
author_name: Endevver
author_link: http://endevver.com
version: 0.8

callbacks:
    build_file_filter:   PubOffline::Plugin::build_file_filter
    build_page:          PubOffline::Plugin::build_page
    cms_post_save.asset: PubOffline::Plugin::cms_post_save_asset
    cms_upload_file:     PubOffline::Plugin::cms_upload_file

task_workers:
    publish_offline:
        label: "Publishes an offline version of content"
        class: 'PubOffline::Worker::PublishOffline'
    handle_asset:
        label: 'Handle an asset for the offline version of a blog'
        class: 'PubOffline::Worker::HandleAsset'
    # copy_static_offline:
    #     label: "Copies static files into an offline folder"
    #     class: 'MT::Worker::CopyStaticOffline'

settings:
    enable_puboffline:
        scope: blog
        default: 0
    output_file_path:
        scope: blog
        default: '<mt:BlogSitePath>puboffline/'
    asset_handling:
        scope: blog
        default: copy

blog_config_template:
    code: PubOffline::CMS::settings

tags:
  block:
    IsOfflineMode?: PubOffline::Tags::is_offline

applications:
    cms:
        methods:
            po_jumpstart_assets: PubOffline::CMS::jumpstart_assets
